<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Explore Geosphere Resource Metadata and Requirements — geosphere_explore_resource • davR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Explore Geosphere Resource Metadata and Requirements — geosphere_explore_resource"><meta name="description" content="Fetches metadata and determines required query parameters for a specific
Geosphere resource ID across all its available type, mode, and format
combinations. It presents available parameters, coverage details, and the
definitive required parameters needed to query the data endpoint via
geosphere_get_data."><meta property="og:description" content="Fetches metadata and determines required query parameters for a specific
Geosphere resource ID across all its available type, mode, and format
combinations. It presents available parameters, coverage details, and the
definitive required parameters needed to query the data endpoint via
geosphere_get_data."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">davR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/geosphere_api.html">Geosphere API</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Explore Geosphere Resource Metadata and Requirements</h1>

      <div class="d-none name"><code>geosphere_explore_resource.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fetches metadata and determines required query parameters for a specific
Geosphere resource ID across all its available type, mode, and format
combinations. It presents available parameters, coverage details, and the
definitive required parameters needed to query the data endpoint via
<code>geosphere_get_data</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geosphere_explore_resource</span><span class="op">(</span></span>
<span>  <span class="va">resource_id</span>,</span>
<span>  api_url <span class="op">=</span> <span class="st">"https://dataset.api.hub.geosphere.at"</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"v1"</span>,</span>
<span>  user_agent <span class="op">=</span> <span class="st">"davR"</span>,</span>
<span>  print_summary <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-resource-id">resource_id<a class="anchor" aria-label="anchor" href="#arg-resource-id"></a></dt>
<dd><p>Character string. The specific dataset or resource ID. Required.</p></dd>


<dt id="arg-api-url">api_url<a class="anchor" aria-label="anchor" href="#arg-api-url"></a></dt>
<dd><p>Base URL for the Geosphere API. Defaults to Geosphere Hub v1.</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>API version string. Defaults to "v1".</p></dd>


<dt id="arg-user-agent">user_agent<a class="anchor" aria-label="anchor" href="#arg-user-agent"></a></dt>
<dd><p>A string to identify the client. Defaults to "davR".</p></dd>


<dt id="arg-print-summary">print_summary<a class="anchor" aria-label="anchor" href="#arg-print-summary"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), print a formatted summary
to the console for each combination found.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list where each element corresponds to a unique combination of
<code>type</code>, <code>mode</code>, and <code>response_formats</code> found for the <code>resource_id</code>. The name
of each element is a descriptive string like <code>"station_historical_csv"</code>.
Each element is itself a list containing:</p>
<dl><dt>combination</dt>
<dd><p>A list detailing the specific type, mode, and formats.</p></dd>

<dt>metadata</dt>
<dd><p>The full raw metadata list fetched from the API's <code>/metadata</code> endpoint (or NULL if failed).</p></dd>

<dt>available_parameters</dt>
<dd><p>A data frame (tibble) of available parameters (if found in metadata).</p></dd>

<dt>time_coverage</dt>
<dd><p>A list indicating start/end times (if found in metadata).</p></dd>

<dt>spatial_info</dt>
<dd><p>A list with spatial details (CRS, bbox, etc.) (if found in metadata).</p></dd>

<dt>required_query_params</dt>
<dd><p>A character vector listing the query parameters identified as required by probing the data endpoint (or NULL if determination failed).</p></dd>

</dl><p>Returns <code>NULL</code> if the initial dataset lookup fails or the <code>resource_id</code> is not found.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function first retrieves the list of all available datasets using
<code>geosphere_get_datasets</code>. It then filters for the specified <code>resource_id</code>.
For each unique combination of type, mode, and format found for that ID, it
retrieves descriptive metadata (available parameters, time range, etc.)
from the resource's <code>/metadata</code> endpoint using <code>geosphere_get_resource_metadata</code>.
Finally, for each combination, it makes a deliberate (parameter-less) request
to the main <em>data</em> endpoint to provoke an error message. By parsing this error
message (typically JSON with a 'detail' field), it accurately identifies the
query parameters that the API requires for that specific data endpoint.
Requires <code>geosphere_get_datasets</code> and <code>geosphere_get_resource_metadata</code>
functions to be available.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Assume geosphere_get_datasets and geosphere_get_resource_metadata are available</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Explore a resource known to have multiple combinations</span></span></span>
<span class="r-in"><span><span class="va">exploration_results</span> <span class="op">=</span> <span class="fu">geosphere_explore_resource</span><span class="op">(</span></span></span>
<span class="r-in"><span>  resource_id <span class="op">=</span> <span class="st">"apolis_short-v1-1d-100m"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The function prints summaries by default.</span></span></span>
<span class="r-in"><span><span class="co"># The returned object is a list named by combinations:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">exploration_results</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># &gt; [1] "grid_historical_geojson"      "grid_historical_netcdf" ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Inspect the details for one specific combination:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="st">"grid_historical_geojson"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">exploration_results</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="co"># Check the *required* parameters found by probing the data endpoint:</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">exploration_results</span><span class="op">$</span><span class="va">grid_historical_geojson</span><span class="op">$</span><span class="va">required_query_params</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="co"># Should show: [1] "parameters" "start" "end" "bbox" (based on example error)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>   <span class="co"># Compare with *available* parameters from metadata:</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">exploration_results</span><span class="op">$</span><span class="va">grid_historical_geojson</span><span class="op">$</span><span class="va">available_parameters</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Explore a resource with likely only one combination</span></span></span>
<span class="r-in"><span><span class="va">exploration_klima</span> <span class="op">=</span> <span class="fu">geosphere_explore_resource</span><span class="op">(</span>resource_id <span class="op">=</span> <span class="st">"klima-v2-1h"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">exploration_klima</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">exploration_klima</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="co"># Likely "station_historical_csv" or similar</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">exploration_klima</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">required_query_params</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="co"># Should show something like "parameters", "start", "end", "station_ids"</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

