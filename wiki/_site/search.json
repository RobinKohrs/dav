[
  {
    "objectID": "climate_analyses.html",
    "href": "climate_analyses.html",
    "title": "Climate Analyses",
    "section": "",
    "text": "SOME DESRIPTION TO FOLLOW\n\n\n\n\n\n\n    \n      \n      \n    \n\n\n\n\n\n\n\n\nTemperaturen in der Nacht\n\n\n\n\n\n\nRobin Kohrs / Netzwerk Klimajournalismus\n\n\nApr 27, 2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "climate-analyses/kjn_tropennächte.html",
    "href": "climate-analyses/kjn_tropennächte.html",
    "title": "Temperaturen in der Nacht",
    "section": "",
    "text": "Ein-Tagesdaten mit der Minimaltemperatur zwischen 18 und 18 Uhr\nAnnahme: Die Minimaltemperaturen steigen\n\n\n\n\n\n\n\nklima-v2-1d ist am geignetsten\n\n\n\n\n\n\n\nShow Code\nds = geosphere_get_datasets()\nds %&gt;% \n  filter(str_detect(resource_id, \"klima-v2\")) %&gt;% \n  datatable(options = list(pageLength=5))\n\n\n\n\n\n\n\n\n\n\n\n\n\nDie Intensität der Tropnnächte:  Nicht nur die Anzahl an Tropennächten sondern die minimale Temperatur\n\n\n\n\n\nNur Wien?\nAlle Landeshauptstädte?\n\n-&gt; Die kombinierte Station an der Wiener Hohen Warte misst seit 1872\n\n\n\n\n\n\nNote\n\n\n\n\n\n\n\nShow Code\nmeta = geosphere_explore_resource(\"klima-v2-1h\")\n\n\n# A tibble: 38 × 3\n  name      long_name                                      unit \n  &lt;chr&gt;     &lt;chr&gt;                                          &lt;chr&gt;\n1 cglo      Globalstrahlung Mittelwert                     W/m² \n2 cglo_flag Qualitätsflag für Globalstrahlung Mittelwert   code \n3 dd        Windrichtung 360° Mittelwert                   °    \n4 dd_flag   Qualitätsflag für Windrichtung 360° Mittelwert code \n5 ddx       Windrichtung zur Spitzenböe                    °    \n6 ddx_flag  Qualitätsflag für Windrichtung zur Spitzenböe  code \n# ℹ 32 more rows\n# A tibble: 38 × 3\n  name      long_name                                      unit \n  &lt;chr&gt;     &lt;chr&gt;                                          &lt;chr&gt;\n1 cglo      Globalstrahlung Mittelwert                     W/m² \n2 cglo_flag Qualitätsflag für Globalstrahlung Mittelwert   code \n3 dd        Windrichtung 360° Mittelwert                   °    \n4 dd_flag   Qualitätsflag für Windrichtung 360° Mittelwert code \n5 ddx       Windrichtung zur Spitzenböe                    °    \n6 ddx_flag  Qualitätsflag für Windrichtung zur Spitzenböe  code \n# ℹ 32 more rows\n\n\nShow Code\n# tl -&gt; paramter für Lufttemperatur in 2m\nmeta$station_historical_csv$metadata$stations %&gt;% \n  filter(id==105) %&gt;% \n  datatable()\n\n\n\n\n\n\n\n\nShow Code\nresource_id = \"klima-v2-1d\"\nparameters = c(\"tlmin\")\nyear_start=1900\nyear_end=2025\nmonth_start =4\nmonth_end = 10\nstation_ids = c(105)\n\n\n\n\n\n\n\n\n\n\nShow Code\n# download the data\nwalk(year_start:year_end, function(year) {\n  cli::cli_inform(glue(\"In year: {year}\"))\n  # get data for one month for one year\n    start_param = glue(\"{year}-{month_start}-01\")\n    days_in_end_month  = lubridate::days_in_month(as.Date(glue(\"{year}-{month_end}-01\")))\n    end_param = glue(\"{year}-{month_end}-{days_in_end_month}\")\n    \n    # output path\n    fn = glue(\"{year}_M{month_start}_to_M{month_end}.csv\")\n    op = sys_make_path(file.path(data_raw_path, fn))\n    \n    if(file.exists(op)) return()\n    \n    path = geosphere_get_data(\n      resource_id = resource_id,\n      parameters = parameters,\n      start = start_param,\n      end = end_param,\n      station_ids = station_ids,\n      output_format = \"csv\",\n      version = 1,\n      mode = \"historical\",\n      type = \"station\",\n      output_file = op,\n      verbose = T,\n      debug = F\n    )\n})\n\n# list all the files\nfiles_each_year = dir(data_raw_path, \".*\\\\.csv\", full.names = T)\ndata_each_year = files_each_year %&gt;% map(~data.table::fread(.x)) %&gt;% bind_rows()\n\n\n\n\n\n\n\nShow Code\n# Prepare data for plotting\ndf_prepared &lt;- data_each_year %&gt;%\n  # Ensure time is in Date format if not already\n    mutate(time = as_datetime(time, format = \"%Y-%m-%dT%H:%M%z\")) %&gt;% \n  # Extract date components\n  mutate(\n    year = year(time),\n    month_num = month(time),\n    # Create month factor with labels for nice facet titles\n    month_lbl = month(time, label = TRUE, abbr = FALSE),\n    day = day(time)\n  ) %&gt;%\n  # Filter out rows where tlmin is NA, as they can't be plotted\n  filter(!is.na(tlmin)) %&gt;%\n  # Optional: Filter for a specific station if your df has multiple\n  # filter(station == 105) %&gt;%\n  # Arrange for potentially smoother plotting (optional)\n  arrange(year, month_num, day)\n\n\n# Define the cutoff year\nhighlight_year &lt;- 2020\n\n# Create the plot\np &lt;- ggplot(df_prepared, aes(x = day, y = tlmin)) +\n\n  # Layer 1: Historical years (before highlight_year) in grey\n  geom_line(\n    data = . %&gt;% filter(year &lt; highlight_year), # Filter data for this layer\n    aes(group = year),                          # Group by year to get separate lines\n    color = \"grey70\",                           # Set color to light grey\n    alpha = 0.7                                 # Make slightly transparent\n  ) +\n\n  # Layer 2: Recent years (highlight_year onwards) colored by year\n  geom_line(\n    data = . %&gt;% filter(year &gt;= highlight_year), # Filter data for this layer\n    aes(color = factor(year), group = year),    # Color by year (as factor)\n    linewidth = 0.8                             # Make recent lines slightly thicker (optional)\n  ) +\n\n  # Facet by month - creates the grid of plots\n  facet_wrap(~ month_lbl, ncol = 1) + # Adjust ncol as needed\n\n  # Apply a nice color scale for the recent years\n  scale_color_viridis_d(\n      option = \"plasma\",      # Viridis palette options: \"magma\", \"plasma\", \"inferno\", \"viridis\", \"cividis\"\n      end = 0.9               # Avoid the brightest color (often yellow)\n  ) +\n\n  # Add labels and title\n  labs(\n    title = \"Daily Minimum Temperatures by Month and Year\",\n    subtitle = paste(\"Years since\", highlight_year, \"highlighted. Station:\", first(df_prepared$station)), # Adjust if needed\n    x = \"Day of Month\",\n    y = \"Minimum Temperature (°C)\",\n    color = \"Recent Year\" # Legend title for the color scale\n  ) +\n\n  # Apply a clean theme\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5),\n    legend.position = \"bottom\", # Or \"right\", \"left\", \"top\"\n    strip.text = element_text(face = \"bold\") # Make facet titles bold\n   )\n\n# Print the plot\nprint(p)\n\n\n\n\n\n\n\n\n\nShow Code\n# Optional: Save the plot\n# ggsave(\"temperature_plot.png\", plot = p, width = 14, height = 10, dpi = 300)"
  },
  {
    "objectID": "climate-analyses/kjn_tropennächte.html#minimaltemperaturen",
    "href": "climate-analyses/kjn_tropennächte.html#minimaltemperaturen",
    "title": "Temperaturen in der Nacht",
    "section": "",
    "text": "Ein-Tagesdaten mit der Minimaltemperatur zwischen 18 und 18 Uhr\nAnnahme: Die Minimaltemperaturen steigen\n\n\n\n\n\n\n\nklima-v2-1d ist am geignetsten\n\n\n\n\n\n\n\nShow Code\nds = geosphere_get_datasets()\nds %&gt;% \n  filter(str_detect(resource_id, \"klima-v2\")) %&gt;% \n  datatable(options = list(pageLength=5))\n\n\n\n\n\n\n\n\n\n\n\n\n\nDie Intensität der Tropnnächte:  Nicht nur die Anzahl an Tropennächten sondern die minimale Temperatur\n\n\n\n\n\nNur Wien?\nAlle Landeshauptstädte?\n\n-&gt; Die kombinierte Station an der Wiener Hohen Warte misst seit 1872\n\n\n\n\n\n\nNote\n\n\n\n\n\n\n\nShow Code\nmeta = geosphere_explore_resource(\"klima-v2-1h\")\n\n\n# A tibble: 38 × 3\n  name      long_name                                      unit \n  &lt;chr&gt;     &lt;chr&gt;                                          &lt;chr&gt;\n1 cglo      Globalstrahlung Mittelwert                     W/m² \n2 cglo_flag Qualitätsflag für Globalstrahlung Mittelwert   code \n3 dd        Windrichtung 360° Mittelwert                   °    \n4 dd_flag   Qualitätsflag für Windrichtung 360° Mittelwert code \n5 ddx       Windrichtung zur Spitzenböe                    °    \n6 ddx_flag  Qualitätsflag für Windrichtung zur Spitzenböe  code \n# ℹ 32 more rows\n# A tibble: 38 × 3\n  name      long_name                                      unit \n  &lt;chr&gt;     &lt;chr&gt;                                          &lt;chr&gt;\n1 cglo      Globalstrahlung Mittelwert                     W/m² \n2 cglo_flag Qualitätsflag für Globalstrahlung Mittelwert   code \n3 dd        Windrichtung 360° Mittelwert                   °    \n4 dd_flag   Qualitätsflag für Windrichtung 360° Mittelwert code \n5 ddx       Windrichtung zur Spitzenböe                    °    \n6 ddx_flag  Qualitätsflag für Windrichtung zur Spitzenböe  code \n# ℹ 32 more rows\n\n\nShow Code\n# tl -&gt; paramter für Lufttemperatur in 2m\nmeta$station_historical_csv$metadata$stations %&gt;% \n  filter(id==105) %&gt;% \n  datatable()\n\n\n\n\n\n\n\n\nShow Code\nresource_id = \"klima-v2-1d\"\nparameters = c(\"tlmin\")\nyear_start=1900\nyear_end=2025\nmonth_start =4\nmonth_end = 10\nstation_ids = c(105)\n\n\n\n\n\n\n\n\n\n\nShow Code\n# download the data\nwalk(year_start:year_end, function(year) {\n  cli::cli_inform(glue(\"In year: {year}\"))\n  # get data for one month for one year\n    start_param = glue(\"{year}-{month_start}-01\")\n    days_in_end_month  = lubridate::days_in_month(as.Date(glue(\"{year}-{month_end}-01\")))\n    end_param = glue(\"{year}-{month_end}-{days_in_end_month}\")\n    \n    # output path\n    fn = glue(\"{year}_M{month_start}_to_M{month_end}.csv\")\n    op = sys_make_path(file.path(data_raw_path, fn))\n    \n    if(file.exists(op)) return()\n    \n    path = geosphere_get_data(\n      resource_id = resource_id,\n      parameters = parameters,\n      start = start_param,\n      end = end_param,\n      station_ids = station_ids,\n      output_format = \"csv\",\n      version = 1,\n      mode = \"historical\",\n      type = \"station\",\n      output_file = op,\n      verbose = T,\n      debug = F\n    )\n})\n\n# list all the files\nfiles_each_year = dir(data_raw_path, \".*\\\\.csv\", full.names = T)\ndata_each_year = files_each_year %&gt;% map(~data.table::fread(.x)) %&gt;% bind_rows()\n\n\n\n\n\n\n\nShow Code\n# Prepare data for plotting\ndf_prepared &lt;- data_each_year %&gt;%\n  # Ensure time is in Date format if not already\n    mutate(time = as_datetime(time, format = \"%Y-%m-%dT%H:%M%z\")) %&gt;% \n  # Extract date components\n  mutate(\n    year = year(time),\n    month_num = month(time),\n    # Create month factor with labels for nice facet titles\n    month_lbl = month(time, label = TRUE, abbr = FALSE),\n    day = day(time)\n  ) %&gt;%\n  # Filter out rows where tlmin is NA, as they can't be plotted\n  filter(!is.na(tlmin)) %&gt;%\n  # Optional: Filter for a specific station if your df has multiple\n  # filter(station == 105) %&gt;%\n  # Arrange for potentially smoother plotting (optional)\n  arrange(year, month_num, day)\n\n\n# Define the cutoff year\nhighlight_year &lt;- 2020\n\n# Create the plot\np &lt;- ggplot(df_prepared, aes(x = day, y = tlmin)) +\n\n  # Layer 1: Historical years (before highlight_year) in grey\n  geom_line(\n    data = . %&gt;% filter(year &lt; highlight_year), # Filter data for this layer\n    aes(group = year),                          # Group by year to get separate lines\n    color = \"grey70\",                           # Set color to light grey\n    alpha = 0.7                                 # Make slightly transparent\n  ) +\n\n  # Layer 2: Recent years (highlight_year onwards) colored by year\n  geom_line(\n    data = . %&gt;% filter(year &gt;= highlight_year), # Filter data for this layer\n    aes(color = factor(year), group = year),    # Color by year (as factor)\n    linewidth = 0.8                             # Make recent lines slightly thicker (optional)\n  ) +\n\n  # Facet by month - creates the grid of plots\n  facet_wrap(~ month_lbl, ncol = 1) + # Adjust ncol as needed\n\n  # Apply a nice color scale for the recent years\n  scale_color_viridis_d(\n      option = \"plasma\",      # Viridis palette options: \"magma\", \"plasma\", \"inferno\", \"viridis\", \"cividis\"\n      end = 0.9               # Avoid the brightest color (often yellow)\n  ) +\n\n  # Add labels and title\n  labs(\n    title = \"Daily Minimum Temperatures by Month and Year\",\n    subtitle = paste(\"Years since\", highlight_year, \"highlighted. Station:\", first(df_prepared$station)), # Adjust if needed\n    x = \"Day of Month\",\n    y = \"Minimum Temperature (°C)\",\n    color = \"Recent Year\" # Legend title for the color scale\n  ) +\n\n  # Apply a clean theme\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5),\n    legend.position = \"bottom\", # Or \"right\", \"left\", \"top\"\n    strip.text = element_text(face = \"bold\") # Make facet titles bold\n   )\n\n# Print the plot\nprint(p)\n\n\n\n\n\n\n\n\n\nShow Code\n# Optional: Save the plot\n# ggsave(\"temperature_plot.png\", plot = p, width = 14, height = 10, dpi = 300)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "DAV",
    "section": "",
    "text": "DAV"
  },
  {
    "objectID": "misc.html",
    "href": "misc.html",
    "title": "Tips and Tricks for this and that",
    "section": "",
    "text": "It sucks to open finder with a shortcut configured via apple script because it alwas brings up all the windows of Finder on the current workspace while what you actually want is to only bring the newly created one on top. E.g. this script works, but does exactly that…\non run {input, parameters}\n\n    tell application \"Finder\"\n        -- Check if there are NO Finder windows open\n        if (count of Finder windows) is 0 then\n            -- If no windows are open, make exactly one new window.\n            -- This will open in the current Space.\n            make new Finder window\n        end if\n        \n        -- Whether a window was just opened or already existed,\n        -- bring Finder to the front (activating it in the current Space).\n        activate\n    end tell\n    \n    return input\nend run\n-&gt; Better look here and just use opt+cmd-space to open finder!\n\n\n\n\ncheck here and use this command for enabling smooth scrolling in VS Code (or any other codium editor)\n\ndefaults write -g ApplePressAndHoldEnabled -bool false\n\nor use this command to check if it is enabled\n\ndefaults read -g ApplePressAndHoldEnabled"
  },
  {
    "objectID": "misc.html#mac",
    "href": "misc.html#mac",
    "title": "Tips and Tricks for this and that",
    "section": "",
    "text": "It sucks to open finder with a shortcut configured via apple script because it alwas brings up all the windows of Finder on the current workspace while what you actually want is to only bring the newly created one on top. E.g. this script works, but does exactly that…\non run {input, parameters}\n\n    tell application \"Finder\"\n        -- Check if there are NO Finder windows open\n        if (count of Finder windows) is 0 then\n            -- If no windows are open, make exactly one new window.\n            -- This will open in the current Space.\n            make new Finder window\n        end if\n        \n        -- Whether a window was just opened or already existed,\n        -- bring Finder to the front (activating it in the current Space).\n        activate\n    end tell\n    \n    return input\nend run\n-&gt; Better look here and just use opt+cmd-space to open finder!\n\n\n\n\ncheck here and use this command for enabling smooth scrolling in VS Code (or any other codium editor)\n\ndefaults write -g ApplePressAndHoldEnabled -bool false\n\nor use this command to check if it is enabled\n\ndefaults read -g ApplePressAndHoldEnabled"
  },
  {
    "objectID": "climate-analyses/kjn_tropennächte.html#durschnittstemperatur-in-der-nacht-im-juli",
    "href": "climate-analyses/kjn_tropennächte.html#durschnittstemperatur-in-der-nacht-im-juli",
    "title": "Temperaturen in der Nacht",
    "section": "Durschnittstemperatur in der Nacht im Juli",
    "text": "Durschnittstemperatur in der Nacht im Juli"
  }
]