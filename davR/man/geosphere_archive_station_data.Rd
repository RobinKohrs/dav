% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/geosphere_archive_station_data.R
\name{geosphere_archive_station_data}
\alias{geosphere_archive_station_data}
\title{Incrementally Archive Geosphere Data (Simple Batched Version)}
\usage{
geosphere_archive_station_data(
  resource_id,
  params = c("tl", "ts", "tlmax", "tsmax"),
  archive_dir = "geosphere_station_archive",
  start_date = NULL,
  end_date = NULL,
  station_ids = NULL,
  station_batch_size = NULL,
  time_batch_size = "month",
  api_delay_secs = 0.2,
  api_url = "https://dataset.api.hub.geosphere.at",
  print_url = FALSE
)
}
\arguments{
\item{resource_id}{The dataset ID to archive (e.g., "klima-v2-10min").}

\item{params}{Vector of parameters to download (e.g., c("tl", "ts", "tlmax", "tsmax")).}

\item{archive_dir}{The root directory for the archive.}

\item{start_date}{Optional. The start date for the download (YYYY-MM-DD). If \code{NULL},
the function uses each station's specific \code{valid_from} date.}

\item{end_date}{Optional. The end date for the download (YYYY-MM-DD). Defaults to
the current system date.}

\item{station_ids}{Optional vector of station IDs. If \code{NULL}, all stations are used.}

\item{station_batch_size}{Number of stations to query together (default: calculated based on rate limits).}

\item{time_batch_size}{Time period to query at once: "day", "week", "month", "year" (default: "month").}

\item{api_delay_secs}{Seconds to wait between each API call (default: 0.2 to respect 5 req/sec limit).}

\item{api_url}{Base URL for the Geosphere API.}

\item{print_url}{If \code{TRUE}, prints the full URL that will be requested for each API call.}
}
\value{
Invisibly returns a list containing counts of downloaded, skipped,
and failed files.
}
\description{
Downloads data from Geosphere and saves it to a local archive by batching
stations and time periods to minimize API calls. Respects API rate limits
(5 requests/second, 240/hour) and request size limits (1M values for CSV).
}
